# 네트워크 인터페이스 계층
*written by sohyeon, hyemin 💡*

<br>

## 목차
### [1. 네트워크 인터페이스 계층이란?](#1-네트워크-인터페이스-계층이란-1)
### [2. MAC 어드레스](#2-MAC-어드레스-1)
### [3. 이더넷](#3-이더넷-1)
### [4. 네트워크 허브](#4-네트워크-허브-1)
### [5. 무선 LAN](#5-무선-LAN-1)
### [6. ARP](#6-ARP-1)
### [7. FTTx와 xDSL](#7-FTTx와-xDSL)
### [8. PPP와 PPPoE](#8-PPP와-PPPoE)

<br>

## 1. 네트워크 인터페이스 계층이란?
`네트워크 인터페이스 계층`은 네트워크의 하드웨어를 제어하는 부분이다.    
하드웨어는 네트워크 어댑터나 LAN 케이블, 광 케이블을 말한다.  
이러한 하드웨어들을 제어하면서 `상위의 인터넷 계층이 하위의 하드웨어 동작에 대해서는 신경쓰지 않고 동작할 수 있도록 만들어주는 것`이 네트워크 인터페이스 계층의 역할이다.  

<br>

## 2. MAC 어드레스
### MAC 어드레스란?
`MAC 어드레스`는 네트워크 장비에 부여된 식별 번호다.  
```
MAC 어드레스는 제조사 식별 번호(24비트) + 제조사에서 정의한 식별 번호(24비트)로 이루어져 있다.
제조사 식별 번호: 어댑터 제조사를 식별하는 번호
제조사에서 정의한 식별 번호: 제조사가 생산한 제품들끼리 중복되지 않도록 부여하는 번호
```

### 수신지 주소로 사용하는 MAC 어드레스
MAC 어드레스는 유선 LAN의 이더넷이나 무선 LAN 외에도 단거리 통신에 사용되는 블루투스와 같은 다양한 데이터 통신에서 활용된다.  
네트워크 인터페이스 계층이 보내는 데이터를 `프레임(frame)`이라고 부르는데, 이 프레임 안에 송신지와 수신지의 MAC 어드레스 정보가 들어간다.  
```
이더넷 프레임
프리앰블 | 수신지 MAC 어드레스 | 송신지 MAC 어드레스 | 길이/타입 | 데이터 본체 | FCS

프리앰블: 데이터가 시작하는 것을 표시한다.
데이터 본체: IP 패킷 등이 여기에 들어간다.
FCS: 오류 방지 정보가 여기에 들어간다.
```

### IP 어드레스와 MAC 어드레스의 차이점
`MAC 어드레스`의 역할은 데이터를 전달할 목적지를 가리킨다는 점에서 IP어드레스와 유사하다.  

하지만,   `IP 어드레스`는 최종 목적지가 한번 설정되면 전송 과정 중에 변경되지 않지만, `MAC 어드레스`는 전송 과정 중에 통신 경로상에 다음 장비의 어드레스로 교체된다는 점이 다르다.  

<br>

## 3. 이더넷
`이더넷`은 하나의 인터넷 회선에 유/무선 통신장비 공유기, 허브 등을 통해 다수의 시스템이 랜선 및 통신포트에 연결되어 통신이 가능한 네트워크 구조를 말한다. 이더넷은 현재 가장 많이 사용되는 유선 LAN의 규격으로, 기술이 발전함에 따라 점점 더 많은 데이터를 고속으로 처리할 수 있게 개선되고 있다.  

### 주요 이더넷 규격
| 규격 이름 | 특징 |
|:---:|:---:|
| 10BASE-T | 트위스트 페어 케이블을 사용하고 10Mbps로 통신한다. |
| 100BASE-TX | 트위스트 페어 케이블을 사용하고 100Mbps로 통신한다. |
| 1000BASE-T | 트위스트 페어 케이블을 사용하고 1000Mbps로 통신한다. |
| 1000BASE-X | 광섬유 케이블을 사용하고 LX, SX, FX 등의 규격이 있다. 이들 규격은 케이블 종류나 전송 거리에 차이가 있다. |
* 100BASE-TX와 같이 규격 표기 방법에서 앞에 나오는 숫자는 전송 속도를, BASE는 신호의 변조 방식을, 마지막 알파벳은 케이블의 종류를 의미한다.  
* 주파수가 높은 신호는 쉽게 감쇠하기 때문에 전송 속도가 고속인 규격에서는 가능한 한 주파수가 높아지지 않도록 제한하는 대신 케이블 자체를 고급 사양으로 사용하고 있다.  

### 프레임의 시작을 알리는 프리앰블
수신 측의 네트워크 어댑터는 전압의 높낮이가 변화하는 신호를 받아 0과 1의 디지털 신호로 복호화한다. 이때 전압이 변화하는 타이밍에 맞춰 신호를 분석하려면 어디부터가 시작인지 기준점을 알아야 한다.  
프레임 앞부분에는 `프리앰블(preamble)`이라고 하는 패턴을 두어 신호의 시작을 알 수 있도록 만들어져 있다.  
프리앰블은 길이가 상당히 긴 편이라서 통신 중에 앞부분의 데이터를 잃어버리더라도 1010이 일정 횟수 반복되다 마지막이 10101011로 끝나면 프레임의 시작이라고 인식한다.  
<br>

## 4. 네트워크 허브
### 네트워크 허브의 동작 방식
유선 LAN에서는 `네트워크 허브`라는 장비에 케이블을 연결해서 네트워크를 구성한다.  
`네트워크 허브`는 수신한 데이터를 다른 컴퓨터에게 전송하며, 리피터 허브, L2 스위치(스위칭 허브), L3 스위치 등이 있다.  

### L2 스위치  
`L2 스위치(스위칭 허브)`는 포트에 연결된 각 호스트의 MAC 어드레스를 기억해 두었다가 통신할 당사자 간에만 데이터를 전달하기 때문에 통신 과정에서 다른 호스트가 보내는 패킷 신호와의 충돌을 피할 수 있다.  

#### L2 스위치가 통신하는 방식
* 수신지의 MAC 어드레스를 확인한 후에 수신 측의 LAN 포트에만 신호를 보낸다.  
* LAN 포트가 독립적으로 구성되어 있어서 동시에 여러 신호를 보낼 수 있다.  

### 브로드캐스트 도메인
`브로드캐스트 도메인(broadcast domain)`이란, 수신지의 주소가 브로드캐스트 어드레스일 때 데이터가 전달되는 범위를 말한다.  
예를 들어, L2 스위치로 네트워크를 구성하였다면 `네트워크 전체`가 브로드캐스트 도메인이 된다.  

네트워크에 연결된 호스트의 수가 많을 경우, DHCP나 OS의 파일 공유와 같은 브로드캐스트 통신이 자주 사용되면 네트워크 내에 대량의 패킷이 발생해서 망이 혼잡해질 수도 있다.  

#### 리피터 허브와 콜리전 도메인
L2 스위치가 보급되기 전에는 한 개의 호스트에서 수신한 데이터를 다른 모든 호스트에게 전달하는 `리피터 허브`를 많이 사용했었다.  
모든 호스트가 회선을 공유하고 있는 형태라서 여러 대의 호스트가 동시에 통신하게 되면 네트워크상에서 신호가 충돌할 수 있는데, 이렇게 충돌이 발생할 수 있는 범위를 `층돌 도메인(콜리전 도메인)`이라고 불렀다.  

### L3 스위치
`L3 스위치`는 OSI 참조 모델 중 네트워크 계층에 해당되고, TCP/IP 모델에서는 인터넷 계층의 기능까지 수행할 수 있는 네트워크 장비다.  
`L3 스위치의 대표적인 기능`은 `VLAN(Virtual LAN)`을 꼽을 수 있는데, 이 기능은 LAN을 몇 개의 가상적인 네트워크로 분할해서 통신 효율을 높이기 위해 사용한다. VLAN을 구성하면 브로드캐스트 패킷을 VLAN 내의 호스트 범위로만 제한하여 전달할 수 있다.  
* 같은 장비의 포트에 연결되어 있어도 서로 다른 네트워크처럼 구성할 수 있다.  
* VLAN별로 서로 다른 IP 어드레스를 가지는 네트워크를 만들 수 있다.  
* VLAN 내의 통신 방식은 L2 스위치와 같으며, 라우터처럼 라우팅을 하면서 네트워크를 넘나들 수 있다.  
<br>

## 5. 무선 LAN
전파를 이용해서 네트워크를 구성하는 `무선 LAN`의 정식 규격명은 `IEEE 802.11`이다.  
무선 LAN 에서는 다른 통신 장비가 전파를 발신하고 있지 않은 것을 확인한 후, 통신을 시작하는 `CSMA/CA(Carrie Sense Multiple Access with Collision Avoidance)` 방식을 사용한다.

### 주요 LAN 규격

### 무선 LAN의 프레임 구조
<br>

## 6. ARP

### ARP 헤더

### 프락시 ARP
<br>

## 7. FFTx와 xDSL

<br>

## 8. PPP와 PPPoE

<br>

## Reference & Additional Resources
> TCP/IP 쉽게, 더 쉽게
